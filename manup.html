<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>creer votre background</title>
</head>
<body>
        <div class="shapeGen">
        <select id="shape">
            <h3>shape :</h3>
            <option value="tri">triangle</option>
            <option value="cer">cercle</option>
            <option value="rect">rectangle</option>
        </select>
        <select id="fill">
            <h3>coleur du fill:</h3>
            <option value="none">sans</option>            
            <option value="blue">blue</option>
            <option value="yellow">jaune</option>
            <option value="green">vert</option>
        </select>
        <select id="stroke">
            <h3>coleur du stroke:</h3>
            <option value="none">sans</option>            
            <option value="blue">blue</option>
            <option value="yellow">jaune</option>
            <option value="green">vert</option>
        </select>
        <input type="button" value="ajouter" id="add-button">
        </div>
    <div class="main">
        <svg id="bgsvg" width="500" height="500" style="overflow:visible">
            <rect width="500" height="500" style="fill:#DAF7A6;" />
        </svg>
        <div class="move-pl" style="display: none;">
            <input type="button" value="up" id="up">
            <input type="button" value="down" id="down">
            <input type="button" value="left" id="left">
            <input type="button" value="right" id=right>
            <button id="mfy-btn"></button>
        </div>
        <div class="modify-pl" >
            <div id="mfy-tri" style="display: none;">
            x1(min): <input type="text" id="x1">
            y1(max): <input type="text" id="y1">
            x2: <input type="text" id="x2">
            y2(min): <input type="text" id="y2">    
            x3(max): <input type="text" id="x3">
            y3: <input type="text" id="y3">
            </div>
            <div id="mfy-rect" style="display: none;">
                x: <input type="text" id="x">
                y: <input type="text" id="y">
                height: <input type="text" id="height">
                width: <input type="text" id="width">    
            </div>
            <div id="mfy-cer" style="display: none;">
                cx: <input type="text" id="cx">
                cy: <input type="text" id="cy">
                r: <input type="text" id="r"> 
            </div>
            
            
        </div>
    </div>


    

<script>
    const svgbg=document.getElementById("bgsvg");
    var bgHeight = Number(svgbg.getAttribute("height"));
    var bgWidth = Number(svgbg.getAttribute("width"));;
    //triangle 
    var x1 = 20;
    var x2 = 75;
    var x3 = 125;
    var y1 = 100;
    var y2 = 20;
    var y3 = 100;
    //cercle
    var cx = 60;
    var cy = 60;
    var r = 40;
    //rectangle
    var x =20;
    var y = 20;
    var height = 100;
    var width = 100;
    //add button
    document.getElementById("add-button").onclick = function() {
        var shape = document.getElementById("shape").value;
        var fill = document.getElementById("fill").value;
        var stroke = document.getElementById("stroke").value;
        //check if both values are none
        if(fill=="none" && stroke=="none"){
            alert("Il est interdit de mettre le fill et le stroke nuls");           //alert
            return;
        }
    if(shape == "tri"){//triangle
           
        var obj=document.createElementNS("http://www.w3.org/2000/svg","polygon")
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);
        //show tri-pnl
        document.getElementById("mfy-tri").style.display="block";
        document.getElementById("mfy-rect").style.display="none";
        document.getElementById("mfy-cer").style.display="none";
        //show attributes in input
        document.getElementById("x1").value=x1;
        document.getElementById("x2").value=x2;
        document.getElementById("x3").value=x3;
        document.getElementById("y1").value=y1;
        document.getElementById("y2").value=y2;
        document.getElementById("y3").value=y3;
        //set entered values on change
        document.getElementById("x1").onchange = function(){
        var X1=Number(document.getElementById("x1").value);
        if(X1>=0 && X1<=x2){
        x1=X1;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`); 
            }
        else{
            alert("valeur invalide")
            }
        }//end of x1
        document.getElementById("x2").onchange = function(){
        var X2=Number(document.getElementById("x2").value);
        if(X2>=x1 && X2<=x3){
        x2=X2;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`); 
            }
        else{
            alert("valeur invalide")
            }
        }//end of x2
        document.getElementById("x3").onchange = function(){
        var X3=Number(document.getElementById("x3").value);
        if(X3<=bgWidth && X3>=x2){
        x3=X3;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`); 
            }
        else{
            alert("valeur invalide")
            }
        }//end of x3
        document.getElementById("y1").onchange = function(){
        var Y1=Number(document.getElementById("y1").value);
        if(Y1 <= bgHeight && Y1>=y3){//
        y1=Y1;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of y1
        document.getElementById("y2").onchange = function(){
        var Y2=Number(document.getElementById("y2").value);
        if(Y2 <= y3 && Y2>=0){//
        y2=Y2;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of y2
        document.getElementById("y3").onchange = function(){
        var Y3=Number(document.getElementById("y3").value);
        if(Y3 <= y1 && Y3>=y2){//
        y3=Y3;
        obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of y3
    }
    if(shape == "cer"){
        var obj=document.createElementNS("http://www.w3.org/2000/svg","circle");
        obj.setAttribute("cx",`${cx}`);
        obj.setAttribute("cy",`${cy}`);
        obj.setAttribute("r",`${r}`);
        //show mfy-pnl
        document.getElementById("mfy-cer").style.display="block";
        document.getElementById("mfy-tri").style.display="none";
        document.getElementById("mfy-rect").style.display="none";
        //show cercle attributes
        document.getElementById("cx").value=cx;
        document.getElementById("cy").value=cy;
        document.getElementById("r").value=r;
        //set entered values on change
        document.getElementById("cx").onchange = function(){
        var Cx=Number(document.getElementById("cx").value);
        if(Cx+r <= bgWidth && Cx-r>=0){
        cx=Cx;
        obj.setAttribute("cx",`${cx}`);  
            }
        else{
            alert("valeur invalide")
            }     
        }//end of cx
        document.getElementById("cy").onchange = function(){
        var Cy=Number(document.getElementById("cy").value);
        if(Cy+r <= bgHeight && Cy-r>=0){//
        cy=Cy;
        obj.setAttribute("cy",`${cy}`); 
            }
        else{
            alert("valeur invalide")
            }
        }//end of cy
        document.getElementById("r").onchange = function(){
        var R=Number(document.getElementById("r").value);
        if(R+cx<= bgWidth && R+cy<=bgHeight && cx-R >= 0 && cy-R >= 0){//
        r=R;
        obj.setAttribute("r",`${r}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of r
    }
    if(shape == "rect"){
        var obj=document.createElementNS("http://www.w3.org/2000/svg","rect");
        obj.setAttribute("width",`${height}`);
        obj.setAttribute("height",`${width}`);
        obj.setAttribute("x",`${x}`);
        obj.setAttribute("y",`${y}`);
        //show rect-pnl
        document.getElementById("mfy-rect").style.display="block";
        document.getElementById("mfy-tri").style.display="none";
        document.getElementById("mfy-cer").style.display="none";
        //show attributes in input
        document.getElementById("x").value=x;
        document.getElementById("y").value=y;
        document.getElementById("width").value=width;
        document.getElementById("height").value=height;
        //set entered values on change
        document.getElementById("x").onchange = function(){
        var X=Number(document.getElementById("x").value);
        if(X+width <= bgWidth && X>=0){
        x=X;
        obj.setAttribute("x",`${x}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of x
        document.getElementById("y").onchange = function(){
        var Y=Number(document.getElementById("y").value);
        if(Y+height <= bgHeight && Y>=0){//
        y=Y;
        obj.setAttribute("y",`${y}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of y
        document.getElementById("width").onchange = function(){
        var Width=Number(document.getElementById("width").value);
        if(Width+x<= bgWidth && Width>0){//
        width=Width;
        obj.setAttribute("width",`${width}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of width
        document.getElementById("height").onchange = function(){
        var Height=Number(document.getElementById("height").value);
        if(Height+y<= bgHeight && Height>0){//
        height=Height;
        obj.setAttribute("height",`${height}`);  
            }
        else{
            alert("valeur invalide")
            }
        }//end of height
    }
        //set the style
        obj.setAttribute("fill",fill);
        obj.setAttribute("stroke",stroke);
        obj.setAttribute("stroke-width","3");
        //add the object
        svgbg.appendChild(obj);
        //show control panel
        document.getElementsByClassName("move-pl")[0].style.display="block";
       
        //mouvement
          var move = 40;
         //deplacement value
        document.getElementById("up").onclick = function(){
            
        if(shape == "rect"){
            if(y-move>0){
                y=y-move;
            }
            else{
                y=0;
            }
            obj.setAttribute("y",`${y}`);
        }
        else if(shape == "cer"){
            if((cy-r)-move>0){
                cy=cy-move;
            }
            else{
                cy=r;
            }
            obj.setAttribute("cy",`${cy}`);
        }
        if(shape == "tri"){
            //suppose y2 is the heigher
            if(y2-move>0){
                y1=y1-move;
                y2=y2-move;
                y3=y3-move;
            }
            else{
                y3=y3-y2;
                y1=y1-y2;
                y2=0;
                
            }
            obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);
        }

    }//end of up
    document.getElementById("down").onclick = function(){
            
            if(shape == "rect"){
            if(y+height+move<500){
                y=y+move;
            }
            else{
                y=500-height;
            }
            obj.setAttribute("y",`${y}`);
        }
        else if(shape == "cer"){
            if((cy+r)+move<500){
                cy=cy+move;
            }
            else{
                cy=500-r;
            }
            obj.setAttribute("cy",`${cy}`);
        }
        if(shape == "tri"){
            //suppose y1 is the lowest
            if(y1+move<500){
                y1=y1+move;
                y2=y2+move;
                y3=y3+move;
            }
            else{
                y2=y2+500-y1;
                y3=y3+500-y1;
                y1=500;
                
            }
            obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);
        }

    }//end of down
    document.getElementById("right").onclick = function(){
            
            if(shape == "rect"){
            if(x+width+move<500){
                x=x+move;
            }
            else{
                x=500-width;
            }
            obj.setAttribute("x",`${x}`);
        }
        else if(shape == "cer"){
            if((cx+r)+move<500){
                cx=cx+move;
            }
            else{
                cx=500-r;
            }
            obj.setAttribute("cx",`${cx}`);
        }
        if(shape == "tri"){
            //suppose x3 is on right
            if(x3+move<500){
                x1=x1+move;
                x2=x2+move;
                x3=x3+move;
            }
            else{
                x1=x1+500-x3;
                x2=x2+500-x3;
                x3=500;
            }
            obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);
        }

    }//end of right
    document.getElementById("left").onclick = function(){
            
            if(shape == "rect"){
            if(x-move>0){
                x=x-move;
            }
            else{
                x=0;
            }
            obj.setAttribute("x",`${x}`);
        }
        else if(shape == "cer"){
            if((cx-r)-move>0){
                cx=cx-move;
            }
            else{
                cx=r;
            }
            obj.setAttribute("cx",`${cx}`);
        }
        if(shape == "tri"){
            //suppose x1 is on the left
            if(x1-move>0){
                x1=x1-move;
                x2=x2-move;
                x3=x3-move;
            }
            else{
                x3=x3-x1;
                x2=x2-x1;
                x1=0;
                
            }
            obj.setAttribute("points",`${x1},${y1} ${x2},${y2} ${x3},${y3}`);
        }

    }//end of left
}
    

</script>
</body>
</html>